var submit={server:mst_config_server,socket:null,btn:null,res:false};function addHeaders(key,value){$("#headers_div").html($("#headers_div").html()+'<div class="col-xs-4"><input type="text" class="form-control myinput headers" placeholder="KEY" value="'+key+'"></div><div class="col-xs-8"><input type="text" class="form-control myinput headers" placeholder="VALUE" value="'+value+'"></div>')}function enabledInput(){$(".myinput").attr("disabled",false)}function disabledInput(){$(".myinput").attr("disabled","disabled")}function checkInput(){var _ret=true;$(".mustinput").each(function(){if($(this).val()===""){$(this).attr("class","form-control myinput mustinput label-warning");$(this).focus(function(){$(this).attr("class","form-control myinput mustinput")});_ret=false}});return _ret}function startSubmit(){var headers={};var _tmp="";$(".headers").each(function(){if($(this).attr("placeholder")==="KEY"){_tmp=$(this).val()}else if(_tmp!==""){headers[_tmp]=$(this).val()}});var data={};$(".myinput").each(function(){if($(this).val()&&$(this).attr("name")){data[$(this).attr("name")]=$(this).val()}});if(data["poc_method"]==="POST"){var _obj={};var _tmp=(data["poc_data"]||"").split("&");for(var t in _tmp){var _tmp1=_tmp[t].split("=");_obj[_tmp1[0]]=_tmp[t].replace(_tmp1[0]+"=","")}data["poc_data"]=JSON.stringify(_obj)}else{data["poc_get"]+="?"+data["poc_data"];data["poc_data"]=""}data["headers"]=JSON.stringify(headers);if(data["headers"]==="{}"){data["headers"]=""}submit.socket.emit("submit",data)}$(document).ready(function(){toastr.info("连接服务器中..","Info");disabledInput();submit.socket=io.connect(submit.server);submit.socket.on("connect",function(){toastr.success("连接服务器成功!","Success");enabledInput()}).on("disconnect",function(){toastr.error("服务器断开连接!","Error");disabledInput()}).on("reconnecting",function(){toastr.warning("无法连接服务器","Warning");disabledInput()}).on("submit",function(obj){submit.res=obj.res;if(obj.res){$("#submit_msg").html("感谢您的提交!<br>我们将在尽快审核通过后给予对应的金币奖励!")}else{$("#submit_msg").html("哎呀!提交出错啦!<br>"+obj.msg)}$("#myModal").modal()});$("#myModal").on("hidden.bs.modal",function(e){submit.btn.button("reset");if(submit.res){location.reload()}});$(".myinput").tooltip();$("#submit").click(function(){if(checkInput()){submit.btn=$(this).button("loading");startSubmit();localStorage["mst_author_name"]=$("input[name='author_id']").val();localStorage["mst_author_email"]=$("input[name='author_email']").val();localStorage["mst_author_blog"]=$("input[name='author_blog']").val()}else{toastr.warning("请填写完整必选项!","Warning")}});$(".mustinput").keydown(function(e){if(e.keyCode===13){$("#submit").click()}});$("input[name='author_id']").val(localStorage["mst_author_name"]||"");$("input[name='author_email']").val(localStorage["mst_author_email"]||"");$("input[name='author_blog']").val(localStorage["mst_author_blog"]||"")});
//# sourceMappingURL=submit.min.map