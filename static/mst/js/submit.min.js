var submit={server:mst_config_server,socket:null,btn:null,res:false};function addHeaders(t,a){$("#headers_div").html($("#headers_div").html()+'<div class="col-xs-4"><input type="text" class="form-control myinput headers" placeholder="KEY" value="'+t+'"></div><div class="col-xs-8"><input type="text" class="form-control myinput headers" placeholder="VALUE" value="'+a+'"></div>')}function enabledInput(){$(".myinput").attr("disabled",false)}function disabledInput(){$(".myinput").attr("disabled","disabled")}function checkInput(){var t=true;$(".mustinput").each(function(){if($(this).val()===""){$(this).attr("class","form-control myinput mustinput label-warning");$(this).focus(function(){$(this).attr("class","form-control myinput mustinput")});t=false}});return t}function startSubmit(){var t={};var a="";$(".headers").each(function(){if($(this).attr("placeholder")==="KEY"){a=$(this).val()}else if(a!==""){t[a]=$(this).val()}});var n={};$(".myinput").each(function(){if($(this).val()&&$(this).attr("name")){n[$(this).attr("name")]=$(this).val()}});n["info_cms"]=n["info_cms"].toLowerCase();if(n["poc_method"]==="POST"){var i={};var a=(n["poc_data"]||"").split("&");for(var e in a){var o=a[e].split("=");i[o[0]]=a[e].replace(o[0]+"=","")}n["poc_data"]=JSON.stringify(i)}else{n["poc_get"]+="?"+n["poc_data"];n["poc_data"]=""}n["headers"]=JSON.stringify(t);if(n["headers"]==="{}"){n["headers"]=""}submit.socket.emit("submit",n)}$(document).ready(function(){toastr.info("连接服务器中..","Info");disabledInput();submit.socket=io.connect(submit.server);submit.socket.on("connect",function(){toastr.success("连接服务器成功!","Success");enabledInput()}).on("disconnect",function(){toastr.error("服务器断开连接!","Error");disabledInput()}).on("reconnecting",function(){toastr.warning("无法连接服务器","Warning");disabledInput()}).on("submit",function(t){submit.res=t.res;if(t.res){$("#submit_msg").html("感谢您的提交!<br>我们将在尽快审核通过后给予对应的金币奖励!")}else{$("#submit_msg").html("哎呀!提交出错啦!<br>"+t.msg)}$("#myModal").modal()});$("#myModal").on("hidden.bs.modal",function(t){submit.btn.button("reset");if(submit.res){location.reload()}});$(".myinput").tooltip();$("#submit").click(function(){if(checkInput()){submit.btn=$(this).button("loading");startSubmit();localStorage["mst_author_name"]=$("input[name='author_id']").val();localStorage["mst_author_email"]=$("input[name='author_email']").val();localStorage["mst_author_blog"]=$("input[name='author_blog']").val()}else{toastr.warning("请填写完整必选项!","Warning")}});$(".mustinput").keydown(function(t){if(t.keyCode===13){$("#submit").click()}});$("input[name='author_id']").val(localStorage["mst_author_name"]||"");$("input[name='author_email']").val(localStorage["mst_author_email"]||"");$("input[name='author_blog']").val(localStorage["mst_author_blog"]||"")});
//# sourceMappingURL=submit.min.map