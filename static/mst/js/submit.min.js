(function(t){(function(t,a){a["true"]=t;var n={server:mst_config_server,socket:null,btn:null,res:false};function o(t,a){$("#headers_div").html($("#headers_div").html()+'<div class="col-xs-4"><input type="text" class="form-control myinput headers" placeholder="KEY" value="'+t+'"></div><div class="col-xs-8"><input type="text" class="form-control myinput headers" placeholder="VALUE" value="'+a+'"></div>')}function i(){$(".myinput").attr("disabled",false)}function e(){$(".myinput").attr("disabled","disabled")}function s(){var t=true;$(".mustinput").each(function(){if($(this).val()===""){$(this).attr("class","form-control myinput mustinput label-warning");$(this).focus(function(){$(this).attr("class","form-control myinput mustinput")});t=false}});return t}function r(){var t={};var a="";$(".headers").each(function(){if($(this).attr("placeholder")==="KEY"){a=$(this).val()}else if(a!==""){t[a]=$(this).val()}});var o={};$(".myinput").each(function(){if($(this).val()&&$(this).attr("name")){o[$(this).attr("name")]=$(this).val()}});o["info_cms"]=o["info_cms"].toLowerCase();if(o["poc_method"]==="POST"){var i={};var a=(o["poc_data"]||"").split("&");for(var e in a){var s=a[e].split("=");i[s[0]]=a[e].replace(s[0]+"=","")}o["poc_data"]=JSON.stringify(i)}else{o["poc_get"]+="?"+o["poc_data"];o["poc_data"]=""}o["headers"]=JSON.stringify(t);if(o["headers"]==="{}"){o["headers"]=""}n.socket.emit("submit",o)}$(document).ready(function(){toastr.info("连接服务器中..","Info");e();n.socket=io.connect(n.server);n.socket.on("connect",function(){toastr.success("连接服务器成功!","Success");i()}).on("disconnect",function(){toastr.error("服务器断开连接!","Error");e()}).on("reconnecting",function(){toastr.warning("无法连接服务器","Warning");e()}).on("submit",function(t){n.res=t.res;if(t.res){$("#submit_msg").html("感谢您的提交!<br>我们将在尽快审核通过后给予对应的金币奖励!")}else{$("#submit_msg").html("哎呀!提交出错啦!<br>"+t.msg)}$("#myModal").modal()});$("#myModal").on("hidden.bs.modal",function(t){n.btn.button("reset");if(n.res){location.reload()}});$(".myinput").tooltip();$("#submit").click(function(){if(s()){n.btn=$(this).button("loading");r();localStorage["mst_author_name"]=$("input[name='author_id']").val();localStorage["mst_author_email"]=$("input[name='author_email']").val();localStorage["mst_author_blog"]=$("input[name='author_blog']").val()}else{toastr.warning("请填写完整必选项!","Warning")}});$(".mustinput").keydown(function(t){if(t.keyCode===13){$("#submit").click()}});$("input[name='author_id']").val(localStorage["mst_author_name"]||"");$("input[name='author_email']").val(localStorage["mst_author_email"]||"");$("input[name='author_blog']").val(localStorage["mst_author_blog"]||"")})})({},function(){return this}())})();
//# sourceMappingURL=submit.min.map